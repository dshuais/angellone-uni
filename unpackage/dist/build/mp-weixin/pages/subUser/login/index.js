(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/subUser/login/index"],{"02f1":function(e,n,t){"use strict";t.d(n,"b",(function(){return c})),t.d(n,"c",(function(){return u})),t.d(n,"a",(function(){return o}));var o={"u-Image":function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u--image/u--image")]).then(t.bind(null,"b43e"))}},c=function(){var e=this,n=e.$createElement,o=(e._self._c,t("1f1d"));e.$mp.data=Object.assign({},{$root:{m0:o}})},u=[]},1593:function(e,n,t){"use strict";t.r(n);var o=t("cde2"),c=t.n(o);for(var u in o)"default"!==u&&function(e){t.d(n,e,(function(){return o[e]}))}(u);n["default"]=c.a},"450c":function(e,n,t){"use strict";(function(e){t("d74b");o(t("66fd"));var n=o(t("47ed"));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(n.default)}).call(this,t("543d")["createPage"])},"464c":function(e,n,t){},"47ed":function(e,n,t){"use strict";t.r(n);var o=t("02f1"),c=t("1593");for(var u in c)"default"!==u&&function(e){t.d(n,e,(function(){return c[e]}))}(u);t("581a");var a,i=t("f0c5"),r=Object(i["a"])(c["default"],o["b"],o["c"],!1,null,"971f8628",null,!1,o["a"],a);n["default"]=r.exports},"581a":function(e,n,t){"use strict";var o=t("464c"),c=t.n(o);c.a},cde2:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(t("a34a")),c=t("d8fd"),u=t("5deb"),a=t("d581");function i(e){return e&&e.__esModule?e:{default:e}}function r(e,n,t,o,c,u,a){try{var i=e[u](a),r=i.value}catch(d){return void t(d)}i.done?n(r):Promise.resolve(r).then(o,c)}function d(e){return function(){var n=this,t=arguments;return new Promise((function(o,c){var u=e.apply(n,t);function a(e){r(u,o,c,a,i,"next",e)}function i(e){r(u,o,c,a,i,"throw",e)}a(void 0)}))}}var s={name:"Login",data:function(){return{code:void 0,defaultSelected:{url:"http://ds.dshuais.com/425708edd0ca6e4610de25b0f.jpg"},selected:void 0,startR:void 0,endR:void 0}},onLoad:function(){this.getToday(),this.getLoginCode()},methods:{getToday:function(){var e=this;return d(o.default.mark((function n(){var t,u,a,i;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,c.getTodaySelected)();case 2:a=n.sent,i=a.data,e.selected=i[0]||e.defaultSelected,e.startR=null===(t=e.selected.remark)||void 0===t?void 0:t.split("，")[0],e.endR=null===(u=e.selected.remark)||void 0===u?void 0:u.split("，")[1];case 7:case"end":return n.stop()}}),n)})))()},getLoginCode:function(){var n=this;e.login({success:function(e){n.code=e.code}})},handleLogin:function(){var n=this;e.getUserProfile({desc:"用于完善用户信息",success:function(t){var o=t.encryptedData,c=t.iv;e.checkSession({success:function(e){n.login(o,c,n.code)},fail:function(t){e.login({success:function(e){n.login(o,c,e.code)}})}})},fail:function(e){n.$msg("已取消授权")}})},login:function(n,t,i){var r=this;return d(o.default.mark((function d(){var s,f,l,v;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,(0,c.wxlogin)({encryptedData:n,iv:t,code:i});case 2:if(s=o.sent,f=s.data,l=s.token,v=s.msg,l){o.next=8;break}return o.abrupt("return",r.$msg(v));case 8:(0,u.setToken)(l),(0,u.setStorage)(a.ANGELLONE_USERINFO,f),r.$msg("登录成功",1),setTimeout((function(){e.navigateBack()}),1e3);case 12:case"end":return o.stop()}}),d)})))()},logInLater:function(){e.navigateBack()}}};n.default=s}).call(this,t("543d")["default"])}},[["450c","common/runtime","common/vendor"]]]);