{"version":3,"sources":["webpack:///E:/荣耀功夫/贝卡/贝卡app/beika-ui/components/tinder/vue-tinder/TinderCard.vue?013f","webpack:///E:/荣耀功夫/贝卡/贝卡app/beika-ui/components/tinder/vue-tinder/TinderCard.vue?0d60","webpack:///E:/荣耀功夫/贝卡/贝卡app/beika-ui/components/tinder/vue-tinder/TinderCard.vue?1048","webpack:///E:/荣耀功夫/贝卡/贝卡app/beika-ui/components/tinder/vue-tinder/TinderCard.vue?2b5d","uni-app:///components/tinder/vue-tinder/TinderCard.vue","webpack:///E:/荣耀功夫/贝卡/贝卡app/beika-ui/components/tinder/vue-tinder/TinderCard.vue?778f"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","s0","_self","_c","__get_style","zIndex","index","style","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","tinderMounted","required","ratio","type","Number","default","rewind","Boolean","scaleStep","offsetY","offsetUnit","String","computed","curScale","isCur","inited","status","movingStyle","normalStyle","opacity","transform","transition","ready","getTransform","watch","val","oldVal","scopedRewind","created","mounted","methods","transitionEnd","scale","y","inverse","offsetScale","translateY"],"mappings":"wIAAA,yHACIA,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,8CACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,YAAY,CACvB,CACEC,OAAQ,IAAMR,EAAIS,OAEpBT,EAAIU,SAGNV,EAAIW,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLX,GAAIA,MAKRY,GAAmB,EACnBC,EAAkB,GACtBlB,EAAOmB,eAAgB,G,iCCvBvB,8GAA20B,eAAG,G,mGCmB90B,a,EAEA,CACA,kBACA,OAEIC,cAAe,CACnB,aACA,YAEA,OACA,YACA,aAEA,OACA,aACA,YAEA,OACA,YACMC,UAAU,GAEZC,MAAO,CACLC,KAAMC,OACNC,QAAS,GAEXC,OAAQ,CACNH,KAAM,CAACC,OAAQG,SACfF,SAAS,GAEXG,UAAW,CACTL,KAAMC,OACNH,UAAU,GAEZQ,QAAS,CACPN,KAAMC,OACNH,UAAU,GAEZS,WAAY,CACVP,KAAMQ,OACNV,UAAU,IAGdR,KAAM,WAAR,OACA,UACA,gBACA,iBAEEmB,SAAU,CAERC,SAFJ,WAGM,OAAO/B,KAAK0B,UAAY1B,KAAKQ,OAO/BwB,MAVJ,WAWM,OAAsB,IAAfhC,KAAKQ,OAEdC,MAbJ,WAcM,IAAKT,KAAKiC,OACR,MAAO,GAGT,IAAN,oBACM,OAAIC,IAAW,EAArB,cACelC,KAAKmC,YAELnC,KAAKoC,aAGhBA,YAzBJ,WA0BM,OAAIpC,KAAKgC,MACA,CACLK,QAAS,EACTC,UAAW,8CACXC,WAAY,iEAGT,CACLF,QAASrC,KAAKwC,MAAQ,EAAI,EAC1BF,UAAWtC,KAAKyC,eAChBF,WAAY,qDAApB,OACQ,KAAR,oCADA,oBAKIJ,YAzCJ,WA0CM,IAAN,sBACM,GAAInC,KAAKgC,MAAO,CAEd,IAAR,aACQ,EAAR,gCACA,aACA,aAEA,kBACQvB,EAAM,aAAe,eAA7B,+DACA,CACQ,IAAR,uBACYW,EAAQ,IACVA,EAAQ,GAENpB,KAAKwC,QACP/B,EAAM,WAAqB,EAARW,GAErBX,EAAM,aAAeT,KAAKyC,aAAarB,GAEzC,OAAOX,IAGXiC,MAAO,CACLlC,MADJ,SACA,KAIUmC,EAAMC,IACR5C,KAAK6C,cAAe,KAI1BC,QAzHF,WA0HI9C,KAAK6C,aAAe7C,KAAKwB,OACpBxB,KAAKkB,gBACRlB,KAAKiC,QAAS,IAGlBc,QA/HF,WAqIA,gBAGEC,QAAS,CAEPC,cAFJ,SAEA,GAMM,KAAN,gBAIM,KAAN,mBAKIR,aAjBJ,SAiBA,GACM,IAAN,aACA,IACA,qBAIM,GAHIrB,IACF8B,GAAS9B,EAAQpB,KAAK0B,WAEpB1B,KAAK2B,QAAS,CAChB,IAAR,iBACA,yBACA,MACA,cACYP,IACF+B,GAAK/B,EAAQO,GAEXyB,IACFD,IAAM,EACNE,IAAgB,GAElBC,EAAa,QAArB,uDAEM,MAAO,iBAAb,0D,8CCnMA,8GAA2sC,eAAG,G","file":"components/tinder/vue-tinder/TinderCard.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./TinderCard.vue?vue&type=template&id=2a308b7c&scoped=true&\"\nvar renderjs\nimport script from \"./TinderCard.vue?vue&type=script&lang=js&\"\nexport * from \"./TinderCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TinderCard.vue?vue&type=style&index=0&id=2a308b7c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a308b7c\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/tinder/vue-tinder/TinderCard.vue\"\nexport default component.exports","export * from \"-!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./TinderCard.vue?vue&type=template&id=2a308b7c&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var s0 = _vm.__get_style([\n    {\n      zIndex: 100 - _vm.index\n    },\n    _vm.style\n  ])\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        s0: s0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./TinderCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./TinderCard.vue?vue&type=script&lang=js&\"","<template>\n  <div\n    :data-index=\"index\"\n    class=\"tinder-card\"\n    :style=\"[{ zIndex: 100 - index }, style]\"\n    @transitionend=\"transitionEnd\"\n  >\r\n    <slot />\n    <slot name=\"nope\" />\n    <slot name=\"like\" />\n    <slot name=\"super\" />\n    <slot name=\"down\" />\n    <transition name=\"tinder-rewind\">\n      <slot name=\"rewind\" v-if=\"scopedRewind !== false\" />\n    </transition>\n  </div>\n</template>\n\n<script>\nimport { STATUS } from './status'\n\nexport default {\n  name: 'TinderCard',\n  props: {\n    // 避免 vue-tinder 还未完全初始化时，各 tinder-card 因为没有生效的 style 而重叠\n    tinderMounted: {\n      type: Boolean,\n      default: false\n    },\n    index: {\n      type: Number,\n      required: true\n    },\n    ready: {\n      type: Boolean,\n      default: false\n    },\n    state: {\n      type: Object,\n      required: true\n    },\n    ratio: {\n      type: Number,\n      default: 0\n    },\n    rewind: {\n      type: [Number, Boolean],\n      default: false\n    },\n    scaleStep: {\n      type: Number,\n      required: true\n    },\n    offsetY: {\n      type: Number,\n      required: true\n    },\n    offsetUnit: {\n      type: String,\n      required: true\n    }\n  },\n  data: () => ({\n    inited: false,\n    scopedRewind: false,\n    willDestory: false\n  }),\n  computed: {\n    // 当前缩放尺寸\n    curScale() {\n      return this.scaleStep * this.index\n    },\n    /**\n     * 是否是当前卡片\n     * @param  {Number}  index 卡片索引值\n     * @return {Boolean}       true/false\n     */\n    isCur() {\n      return this.index === 0\n    },\n    style() {\n      if (!this.inited) {\n        return {}\n      }\n      // 借 inited 的变化覆盖在 beforeEnter 中设置的样式\n      const status = this.state.status\n      if (status === STATUS.MOVING) {\n        return this.movingStyle\n      } else {\n        return this.normalStyle\n      }\n    },\n    normalStyle() {\r\n      if (this.isCur) {\n        return {\n          opacity: 1,\n          transform: `translate3d(0,0,0) rotate(0) scale3d(1,1,1)`,\n          transition: `all 500ms cubic-bezier(0.175, 0.885, 0.32, 1.275), z-index 0s`\n        }\n      }\n      return {\n        opacity: this.ready ? 0 : 1,\n        transform: this.getTransform(),\n        transition: `all 500ms cubic-bezier(0.175, 0.885, 0.32, 1.275) ${\n          this.scopedRewind ? this.scopedRewind * 80 : 0\n        }ms, z-index 0s` // 正在 rewind 的 item 的 transition 要与主卡片一致\n      }\n    },\n    movingStyle() {\r\n      const style = { transition: 'none' }\n      if (this.isCur) {\n        // 移动中，位移及旋转角度\n        const state = this.state\n        const { start, move, startPoint } = state\n        const x = move.x - start.x || 0\n        const y = move.y - start.y || 0\n        // 横向滑动卡片一半宽(0.5)时为标准状态\n        const rotate = 10 * this.ratio * startPoint\n        style['transform'] = `translate3d(${x}px,${y}px,0) rotate(${rotate}deg)`\n      } else {\n        let ratio = Math.abs(this.ratio)\n        if (ratio > 1) {\n          ratio = 1\n        }\n        if (this.ready) {\n          style['opacity'] = ratio * 1\n        }\n        style['transform'] = this.getTransform(ratio)\n      }\n      return style\n    }\n  },\n  watch: {\n    index(val, oldVal) {\r\n\t\t// console.log('index', val, oldVal)\n      // 从本来需要 rewind 过渡到新的目标位置，不需要 delay\n      // 如果层级提升需要隐藏，避免快速操作出现闪现 bug\n      if (val < oldVal) {\n        this.scopedRewind = false\n      }\n    }\n  },\n  created() {\n    this.scopedRewind = this.rewind\n    if (!this.tinderMounted) {\n      this.inited = true\n    }\n  },\n  mounted() {\n    // 必须要包裹 requestAnimationFrame，保证在 beforeEnter 执行之后\n    // requestAnimationFrame(() => {\n    //   this.inited = true\n    // })\r\n\t// setTimeout(()=>{\r\n\t\tthis.inited = true\r\n\t// })\r\n  },\n  methods: {\n    // 回归原位，可以重置 vue-tinder 状态\n    transitionEnd(e) {\r\n\t\t// console.log('不知道什么方法', e.target , e.currentTarget, e.propertyName);\r\n      // if (e.target !== e.currentTarget && e.propertyName === 'transform') {\n      // if (e.target !== e.currentTarget && e.type === \"transitionend\") {\r\n\t\t  // console.log('不知道什么方法', e, this.isCur, this.state.status)\n        // 需要在回到原位后隐藏 rewind slot\n        this.scopedRewind = false\n        // if (this.isCur) {\r\n        //   const status = this.state.status  // LEAVING\n        //   if (status === STATUS.REVERT || status === STATUS.REWINDING) {\n            this.$emit('reverted')\n        //   }\n        // }\n      // }\n    },\n    getTransform(ratio) {\n      const index = this.index\n      let translateY = 0\n      let scale = 1 - this.scaleStep * index\n      if (ratio) {\n        scale += ratio * this.scaleStep\n      }\n      if (this.offsetY) {\n        const inverse = this.offsetY < 0\n        const offsetY = Math.abs(this.offsetY)\n        let y = index * offsetY\n        let offsetScale = ((1 - scale) / 2) * 100\n        if (ratio) {\n          y -= ratio * offsetY\n        }\n        if (inverse) {\n          y *= -1\n          offsetScale *= -1\n        }\n        translateY = `calc(${offsetScale}% + ${y}${this.offsetUnit})`\n      }\n      return `translate3d(0,${translateY},0) scale3d(${scale},${scale},1)`\n    }\n  }\n}\n</script>\n\n<style scoped>\n.tinder-card {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  background: #fefefe;\n  border-radius: 10px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);\n}\n\n.tinder-rewind-leave-active {\n  transition: all 0.5s ease;\n}\n\n.tinder-rewind-leave-to {\n  opacity: 0;\n}\n</style>\n","import mod from \"-!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./TinderCard.vue?vue&type=style&index=0&id=2a308b7c&scoped=true&lang=css&\"; export default mod; export * from \"-!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\Hbuilderx\\\\HBuilderX.3.1.17.20210608.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./TinderCard.vue?vue&type=style&index=0&id=2a308b7c&scoped=true&lang=css&\""],"sourceRoot":""}